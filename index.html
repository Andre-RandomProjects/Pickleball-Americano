<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pickleball Americano Generator</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 15px;
      margin: 0;
    }

    .container {
      max-width: 900px;
      margin: auto;
    }

    h2 {
      margin-top: 0;
    }

    label {
      font-weight: bold;
    }

    textarea, input {
      font-size: 16px;
      width: 100%;
      box-sizing: border-box;
      margin-top: 6px;
    }

    textarea {
      height: 160px;
    }

    input[type="number"] {
      max-width: 120px;
    }

    /* ‚úÖ BUTTON ROW */
    .button-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button {
      padding: 12px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: bold;
      flex: 1;
      min-width: 160px;
    }

    .generate-btn {
      background: #1976d2;
      color: white;
    }

    .generate-btn:hover {
      background: #125ea7;
    }

    .reset-btn {
      background: #e53935;
      color: white;
    }

    .reset-btn:hover {
      background: #c62828;
    }

    .round {
      background: #ffffff;
      border-radius: 10px;
      padding: 15px;
      margin-top: 18px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      transition: opacity 0.3s, background 0.3s;
    }

    .round.completed {
      opacity: 0.6;
      background: #eef6ee;
    }

    .round-header {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      border-bottom: 1px solid #eee;
      padding-bottom: 6px;
      margin-bottom: 8px;
    }

    .round-header h3 {
      margin: 0;
      font-size: 18px;
    }

    .complete-toggle {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 14px;
      white-space: nowrap;
      cursor: pointer;
      margin-left: auto;
    }

    .complete-toggle input {
      margin: 0;
    }

    .courts {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .court {
      background: #f9fafb;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      border: 1px solid #e3e6ea;
    }

    .court-title {
      font-weight: bold;
      margin-bottom: 6px;
    }

    .team {
      padding: 8px;
      border-radius: 6px;
      margin: 4px 0;
      background: #eaf2ff;
    }

    .vs {
      font-weight: bold;
      margin: 4px 0;
      color: #555;
    }

    .sitout {
      margin-top: 10px;
      font-style: italic;
      color: #666;
    }

    @media (min-width: 600px) {
      .courts {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 900px) {
      .courts {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }
    }
  </style>
</head>
<body>

<div class="container">

<h2>üèì Pickleball Americano Generator</h2>

<label>Number of courts</label>
<input type="number" id="courts" value="2">

<label>Player names (one per line)</label>
<textarea id="players"></textarea>

<div class="button-row">
  <button class="generate-btn" onclick="confirmGenerate()">Generate Schedule</button>
  <button class="reset-btn" onclick="resetApp()">Reset</button>
</div>

<div id="output"></div>

</div>

<script>
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function toggleCompleted(checkbox) {
  checkbox.closest(".round")
    .classList.toggle("completed", checkbox.checked);
}

function confirmGenerate() {
  const output = document.getElementById("output");
  if (output.children.length > 0) {
    if (!confirm("Generate a new schedule and clear the current one?")) return;
  }
  generate();
}

function resetApp() {
  if (!confirm("This will clear everything and reset the app.\n\nContinue?")) return;

  localStorage.clear();
  document.getElementById("players").value = "";
  document.getElementById("courts").value = 2;
  document.getElementById("output").innerHTML = "";
}

function generate() {
  const courts = parseInt(document.getElementById("courts").value);
  const allPlayers = document.getElementById("players").value
    .split("\n")
    .map(p => p.trim())
    .filter(Boolean);

  const perRound = courts * 4;

  if (allPlayers.length < perRound) {
    alert("Not enough players for the number of courts");
    return;
  }

  const rounds = allPlayers.length;
  const sitOutQueue = [...allPlayers];
  shuffle(sitOutQueue);

  const output = document.getElementById("output");
  output.innerHTML = "";

  for (let r = 0; r < rounds; r++) {
    const sitOutCount = Math.max(0, allPlayers.length - perRound);
    const sitOutPlayers = sitOutQueue.splice(0, sitOutCount);

    const activePlayers = allPlayers.filter(p => !sitOutPlayers.includes(p));
    shuffle(activePlayers);

    const roundDiv = document.createElement("div");
    roundDiv.className = "round";

    roundDiv.innerHTML = `
      <div class="round-header">
        <h3>Round ${r + 1}</h3>
        <label class="complete-toggle">
          <input type="checkbox" onchange="toggleCompleted(this)">
          <span>Done</span>
        </label>
      </div>
    `;

    const courtsDiv = document.createElement("div");
    courtsDiv.className = "courts";

    for (let c = 0; c < courts; c++) {
      const p = activePlayers.slice(c * 4, c * 4 + 4);
      courtsDiv.innerHTML += `
        <div class="court">
          <div class="court-title">Court ${c + 1}</div>
          <div class="team">${p[0]} & ${p[2]}</div>
          <div class="vs">VS</div>
          <div class="team">${p[1]} & ${p[3]}</div>
        </div>
      `;
    }

    roundDiv.appendChild(courtsDiv);

    if (sitOutPlayers.length) {
      roundDiv.innerHTML += `
        <div class="sitout">
          <strong>Sit out:</strong> ${sitOutPlayers.join(", ")}
        </div>
      `;
    }

    output.appendChild(roundDiv);
    sitOutQueue.push(...sitOutPlayers);
  }
}
</script>

</body>
</html>
